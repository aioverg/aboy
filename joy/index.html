<!DOCTYPE html>
<html lang="en" style="font-size: 20px;">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href=".././static/css/index.css">
	<script src=".././static/js/vue.min.js"></script>
	<script src="./data.js"></script>
	<title>前端之旅</title>
</head>

<body>
	<div id="app">
		<header class="header">
			<div class="title">荆棘之旅</div>
			<nav class="nav">
				<a href=".././index.html" class="nav-index">主站</a>
				<span href="" v-on:click="switchMenu('security')">证券</span>
				<span href="" v-on:click="switchMenu('record')">记录</span>
			</nav>
		</header>

		<main class="main">
			<div>
				<div class="date">
					<span>{{nowDate}}</span>
					<span class="day">{{day}}</span>
				</div>
				<a v-for="item in currentMenuData" :key="item.path" :href="item.path">{{item.name}}</a>
			</div>
		</main>
	</div>


	<footer class="footer">
		<span>ICP证:</span>
		<a href="https://beian.miit.gov.cn">豫ICP备18032023号-1</a>
	</footer>
</body>


<script>
	new Vue({
		el: "#app",
		data: function () {
			return {
				nowDate: '',
				day: '',
				homeData: [], // 首页菜单数据列表
				currentMenuData: [], // 其它菜单文章列表

			}
		},
		methods: {
			getDate() {
				let nowDate = new Date() // 当前时间
				let endDate = new Date("dec 1 2025 00:00:00") // 结束时间2025-12-1
				let endTime = endDate.getTime() // 结束时间毫秒数
				let nowTime = nowDate.getTime() // 当前时间毫秒数
				this.day = Math.floor(((endTime - nowTime) / (60 * 60 * 24 * 1000))) // 剩余天数
				let date = nowDate.toLocaleDateString().replace(/\//g, '-') // 获取当前时间日期
				let time = nowDate.toLocaleTimeString() // 获取当前时间时间
				if (time.includes('上午')) {
					let hour = 0
					if (Number(time.slice(2, 4)) == 12) {
						hour = Number(time.slice(2, 4)) - 12 + '0'
					} else {
						hour = '0' + Number(time.slice(2, 3))
					}
					time = time.replace(/上午[0-9][0-9]/, hour)
					this.nowDate = date + " " + time
					return
				}
				if (time.includes('下午')) {
					let hour = Number(time.split(':')[0].slice(2)) + 12 + ''
					time = time.replace(/下午[0-9]{1,2}/, hour)
					this.nowDate = date + " " + time
					return
				}
			},
			switchMenu(menu) {
				switch(menu){
					case 'record':
					  this.currentMenuData = record
					  break
					case 'security':
						this.currentMenuData = security
						break
					default:
						console.log('未找到菜单')
				}
			}
		},
		//页面加载时调用
		created: function () {//新增菜单需要在这个地方加一个判断
			this.getDate()
			setInterval(() => {
				this.getDate()
			}, 1000)
			const params = window.location.href.split('=')[1]
			this.currentMenuData = record
			console.log(params, this.currentMenuData)
		}
	})
</script>

</html>