#### 作用域

##### 变量作用域

- 如果一个变量在 `def` 内赋值，它对于该函数而言是局部的。
- 如果一个变量在一个外层 `def` 中赋值，对于内层的函数来说它是非局部的。
- 如果一个变量在所有 `def` 外赋值，它对整个文件来说是全局的。

##### 作用域细节

- 外围模块是全局作用域。
- 全局作用域的作用范围仅限于单个文件，即在一个文件的顶层变量仅对于这个文件内部的代码而言是全局的，在 Python 中没有一个跨文件的全局作用域的概念。
- 赋值的变量名除非被声明为 `global` 或 `nonlocal` ，否则均为局部变量。
- 所有其他的变量名都是外层函数的局部变量、全局变量或内置变量。
- 函数每次调用都会创建一个新的局部作用域。

##### 变量的查找规则

局部作用域 => 外层作用域 => 全局作用域 => 内置作用域（在内置名称模块中预先赋值好的变量）

##### `global`语句

`global` 语句声明一个全局变量名，全局变量是在外层模块文件的顶层被赋值的变量名；如果全局变量在函数内被赋值的话，必须经过声明；全局变量名在函数的内部不经过声明也可用被引用。

##### `nonlocal语句`

`nonloacl` 语句可以从新定义外层变量名，当内层变量名有冲突时使用，例如：

```python
def f(){
    one = 1
    def g(){
        print(one)
        one = 2
    }
    g()
}
f() #运行报错，因为g()中print(one)会先在本身作用域内查找变量one，找到了one=2，但在print(one)运行的时候one还没有定义，所以报错。

def f(){
    one = 1
    def g(){
        nonlocal one
        print(one)
        one = 2
    }
    g()
}
f() #输出1，nonlocal在g()重新定义了变量，此时使用print(one)时找到了外层的one=1。
```

